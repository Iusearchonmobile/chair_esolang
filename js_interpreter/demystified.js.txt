// I've given this a .txt extension so that Github doesn't suggest that over 50% of this project is written in JS.

// The original interpreter: https://web.archive.org/web/20180420010853/http://torso.me/chair

// I still don't feel like I understand this entirely, but this much was useful for debugging.
// Here's what the variables generally refer to during execution:

// chair.chair and chair.chair => Stack
// chair                             => latest item popped off the stack
// chair                             => current instruction
// chair.chair                     => Pointer to top of stack
// chair.$chair                    => Instruction Pointer


function chair(chair, chair) {
    // Code is not blank
    chair && (
        // Initialize Stack
        chair.chair = [
            // First is undefined
            ,
            // Second is the user input
            chair,
            // Initializes everything to 0, except chair.chair, which is the code
            // This is because the comparison always evaluates to false, which is then cast as a number with the minus sign
            chair = chair = chair.$chair = -(chair == (chair.chair = chair))
        ],
        // Set register 0 as self reference
        // appended ++ increments, but returns the original value
        chair.chair[chair++] = chair.chair,
        // Sets chair.chair to 2
        // prepended ++ increments and returns the incremented value
        chair.chair = ++chair, 

        // decrements chair to 1, recursively calling chair with 1 as user input, no code
        chair(--chair),
        // Sets chair.$chair to 2
        chair.$chair = ++chair, 
        // Sets chair.chair to 3
        chair.chair++ 
    );
    // Gets first instruction
    // Increments chair.$chair to 3, and sets chair to chair.chair[2]
    chair = chair.chair[chair.$chair++];

    // Sets final output
    chair.chair = 
        chair? 
            // Parse the code
            chair?
                // Octal for newline feed
                '\012'== chair? 
                    chair(++chair, chair.chair[++chair.chair] = chair - chair)
                    // chair is space or carriage return
                    : chair == ' ' | '\015' == chair ||
                        // Op is "chair" 
                        (chair) == "c" &  chair. chair [chair.  $chair++ ]== "h" &  chair. chair [chair.  $chair++ ]== "i" &  chair. chair [chair.  $chair++ ]== "c" &  chair. chair [chair.  $chair++ ]== "k" &  chair. chair [chair.  $chair++ ]== "e" &  chair. chair [chair.  $chair++ ]== "n" 
                        && ++chair.chair[chair.chair]
                // Recursive
                ? chair(chair)
                : ["Error on line "+chair+": expected 'chair'", chair.chair = chair++-chair]
            : chair.chair 
        
        :(chair = chair.chair[chair.chair],
            // NOT ORIGINAL: this is my own debug statement
            console.log({ first_registers: chair.chair.slice(1,7), opcode: chair, data: chair.chair.slice(140)}), 
            chair? (
                chair = --chair?
                    --chair? 
                        --chair? 
                            --chair? 
                                --chair?
                                    --chair? 
                                        --chair? 
                                            --chair? 
                                                --chair? 
                                                    chair.chair++ && --chair // Push
                                                : '&#'+chair+';' // Char
                                            : chair.chair[chair.chair[--chair.chair] && (chair.$chair += chair), --chair.chair] // Jump
                                        : chair.chair[chair.chair[chair] = chair.chair[--chair.chair], --chair.chair] // Store
                                    : chair.chair[chair.chair[chair.$chair++]][chair] // Load
                                : chair == chair.chair[--chair.chair] // Comparison
                            : chair * chair.chair[--chair.chair] // Multiplication
                        : chair.chair[--chair.chair] - chair // Subtraction
                    : chair.chair[--chair.chair] + chair // Addition
                : chair.chair ++ && "chair", // chair
            chair.chair[chair.chair] = chair, chair(),
            console.log({ first_registers: chair.chair.slice(1,4), opcode: chair, data: chair.chair.slice(111)})) 
            : chair 
        );

    return chair.chair
}

// 99 chairs program for testing
/*
console.log(chair('asdf', `chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair
chair chair chair chair chair chair chair chair chair chair chair chair chair chair
chair chair chair chair
chair chair chair chair chair chair chair chair chair
chair chair chair chair chair chair chair chair chair chair chair chair chair
chair chair chair chair chair chair chair
chair chair chair chair chair chair chair chair chair chair chair chair chair
chair chair chair chair chair chair

chair
chair chair
chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair
chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair
chair chair chair chair
chair chair chair chair chair chair chair chair chair
chair chair
chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair
chair chair chair chair chair chair chair chair chair
chair chair
chair chair chair chair chair chair chair chair chair chair chair chair
chair chair chair chair chair chair chair
chair chair chair chair chair chair chair chair chair chair chair
chair chair chair chair chair chair

chair chair chair chair chair chair chair chair chair chair chair
chair chair chair chair chair
chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair
chair chair chair chair chair chair chair chair
chair chair chair chair chair chair chair chair chair chair chair
chair chair chair chair chair chair

chair chair chair chair chair chair chair chair chair chair
chair chair chair chair chair
chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair
chair chair chair chair chair chair chair chair
chair chair chair chair chair chair chair chair chair chair chair
chair chair chair chair chair chair

chair chair chair chair chair chair chair chair chair chair chair chair
chair chair chair chair chair chair

chair chair
chair chair chair chair chair chair chair chair chair chair chair
chair chair chair chair chair chair

chair chair chair chair chair chair chair chair chair chair chair
chair chair chair
chair chair chair chair chair chair chair chair chair chair chair
chair chair chair chair chair chair chair
chair chair chair chair chair chair chair chair chair chair chair
chair chair chair chair chair chair

chair chair chair chair chair chair chair chair chair chair chair
chair chair chair
chair chair chair chair chair chair chair chair chair chair
chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair
chair chair chair
chair chair chair chair chair chair chair chair
chair chair chair chair chair chair chair chair chair chair chair
chair chair chair chair chair chair chair chair chair chair chair chair chair
chair chair chair chair chair chair

chair chair
chair
chair chair
chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair
chair chair chair chair chair chair chair chair chair
chair chair
chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair
chair chair chair chair chair chair
chair chair
chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair
chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair
chair chair chair chair
chair chair chair chair chair chair chair chair chair chair chair
chair chair
chair chair chair chair chair chair chair chair chair
chair chair
chair chair chair chair chair chair chair chair chair chair chair chair
chair chair chair chair chair chair

chair chair
chair chair chair chair chair chair chair chair chair chair chair
chair chair chair chair chair chair chair
chair chair chair chair chair chair chair chair chair chair chair chair
chair chair chair chair chair chair chair
chair chair chair chair chair chair chair chair chair chair chair chair
chair chair chair chair chair chair

chair chair chair chair chair chair chair chair chair chair chair chair chair chair
chair chair chair chair chair chair chair chair
chair chair chair chair chair chair chair chair chair chair chair
chair chair chair chair chair chair


chair chair chair chair chair chair chair chair chair chair chair chair
chair chair chair chair chair chair

chair chair chair chair chair chair chair chair chair chair chair
chair chair chair chair chair chair

chair chair
chair chair chair chair chair chair chair chair chair chair chair
chair chair chair chair chair chair chair chair chair chair
chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair
chair chair chair
chair chair chair chair chair chair chair chair
`));
*/

console.log(chair('iissiso', `chair chair chair chair chair chair chair chair chair chair
chair chair chair chair chair chair
chair chair
chair chair chair chair chair chair chair chair chair chair
chair chair chair chair chair chair chair chair chair chair chair
chair chair chair chair chair
chair
chair chair
chair chair
chair chair chair chair chair chair chair chair chair chair chair chair chair chair
chair chair chair chair chair chair chair
chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair
chair chair chair chair chair chair chair chair chair chair chair chair chair chair
chair chair chair chair
chair chair chair chair chair chair chair chair chair
chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair
chair chair chair chair chair chair chair
chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair
chair chair chair chair chair chair

chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair
chair chair chair chair chair chair chair
chair chair chair chair chair chair chair chair chair chair
chair chair chair chair chair chair chair chair chair chair chair
chair chair chair
chair chair chair chair chair chair chair chair chair chair chair chair chair
chair chair chair chair chair chair chair
chair chair chair chair chair chair chair chair chair chair
chair chair chair chair chair chair chair chair chair chair chair chair
chair chair chair chair chair chair chair
chair chair chair chair chair chair chair chair chair chair
chair chair chair chair chair chair chair chair chair chair chair
chair chair chair
chair chair chair chair chair chair chair chair chair chair chair chair
chair chair chair chair chair chair

chair chair chair chair chair
chair chair chair chair chair chair chair chair chair chair
chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair
chair chair chair
chair chair chair chair chair chair chair chair
chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair
chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair
chair chair chair chair
chair chair chair chair chair chair chair chair chair chair chair chair chair chair
chair chair chair chair
chair chair chair chair chair chair chair chair chair chair chair chair
chair chair chair chair chair chair

chair chair chair chair chair
chair chair chair chair chair chair chair chair chair chair
chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair
chair chair chair
chair chair chair chair chair chair chair chair
chair chair chair chair chair chair chair chair chair chair chair
chair chair chair chair chair chair chair chair chair chair chair chair chair
chair chair chair chair chair chair

chair chair
chair chair chair chair chair chair chair chair chair chair chair chair chair
chair chair chair chair chair chair chair
chair chair chair chair chair chair chair chair chair chair chair chair
chair chair chair chair chair chair

chair chair chair chair chair chair chair chair chair chair chair
chair chair chair
chair chair chair chair chair chair chair chair chair chair chair chair chair
chair chair chair chair chair chair

chair chair chair chair chair chair
chair
chair chair chair chair chair chair chair chair chair chair chair chair
chair chair chair chair chair chair
chair chair chair chair
chair chair chair chair chair
chair chair chair chair chair chair chair chair chair chair
chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair
chair chair chair
chair chair chair chair chair chair chair chair
chair chair chair chair chair chair chair chair chair chair chair chair
chair chair
chair chair chair chair chair chair chair chair chair chair chair chair chair
chair chair chair chair chair chair

chair chair chair chair chair chair
chair
chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair
chair chair chair chair chair chair
chair chair chair chair
chair chair chair chair chair
chair chair chair chair chair chair chair chair chair chair
chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair
chair chair chair
chair chair chair chair chair chair chair chair
chair chair chair chair chair chair chair chair chair chair chair
chair chair chair
chair chair chair chair chair chair chair chair chair chair chair chair
chair chair chair chair chair chair

chair chair chair chair
chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair
chair chair chair chair chair chair
chair chair chair chair
chair chair chair chair chair chair chair chair chair chair chair chair chair
chair chair chair chair chair chair

chair chair chair chair chair chair
chair
chair chair chair chair chair
chair chair chair chair chair chair chair chair chair chair
chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair
chair chair chair
chair chair chair chair chair chair chair chair
chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair
chair chair chair chair chair chair

chair chair chair chair chair chair chair chair chair chair chair chair chair
chair chair chair chair chair chair

chair chair chair chair chair chair
chair
chair chair chair chair chair chair chair chair chair chair chair
chair chair chair chair chair chair chair chair

chair chair chair chair chair chair chair chair chair chair chair chair
chair chair chair chair chair chair

chair chair
chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair
chair chair chair chair chair chair

chair chair
chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair
chair chair chair chair chair chair chair
chair chair chair chair chair chair chair chair chair chair chair
chair chair chair chair chair chair chair chair chair chair
chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair chair
chair chair chair
chair chair chair chair chair chair chair chair`));
